package tick1star;

import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;

public class BottomUpMaxHeap<T extends Comparable<T>> extends MaxHeap<T> {

	public BottomUpMaxHeap(List<T> s) {
		super(s);
	}

	@Override
	public T getMax() throws EmptyHeapException {
		if (size == 0)
			throw new EmptyHeapException();

		T max = cheap[0];
		cheap[0] = cheap[size - 1];
		LinkedList<Integer> path = new LinkedList<>();
		int iLargerChild = 0;
		int left;
		int right;

		path.addFirst(0);

		while (iLargerChild < size / 2) {
			left = iLargerChild * 2 + 1;
			right = iLargerChild * 2 + 2;
			if (cheap[left].compareTo(cheap[right]) < 0) {
				iLargerChild = left;
			} else {
				iLargerChild = right;
			}
			path.addLast(iLargerChild);
		}

		while (!path.isEmpty()) {
			if (cheap[path.getLast()].compareTo(cheap[0]) < 0) {
				path.removeLast();
			} else {
				break;
			}
		}

		T sto = cheap[0];

		while (path.size() > 1) {
			cheap[path.getFirst()] = cheap[path.get(1)];
			path.removeFirst();
		}
		cheap[path.getLast()] = sto;

		return max;
	}

	public static void main(String args[]) {
		ArrayList<Character> arrayLi = new ArrayList<>();
		for (Character c : "cdargswhk".toCharArray()) {
			arrayLi.add(c);
		}
		BottomUpMaxHeap<Character> bbb = new BottomUpMaxHeap<>(arrayLi);
		bbb.getLength();
	}
}
